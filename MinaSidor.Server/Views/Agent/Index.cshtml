@{
    ViewData["Title"] = "Home Page";
}


<meta name="viewport" content="width=device-width" />
<title>Index</title>
<link href="~/lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
<script src="~/lib/bootstrap/dist/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript">
    $(function () {
        GetCustomers();
        $("#myAutocomplete").keyup(function () {
            GetCustomers();
        });
    });
    function GetCustomers() {
        var customerName = $.trim($("#myAutocomplete").val());
        $.ajax({
            type: "GET",
            url: "/api/Agent/autocomplete",
            data: jQuery.param({ id: customerName }),
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            success: function (customers) {
                var table = $("#tblCustomers");
                table.find("tr:not(:first)").remove();

                var data = $.parseJSON(customers);
                $.each(data, function (i, customer) {
                    var table = $("#tblCustomers");
                    var y = document.createElement("TR");
                    y.setAttribute("scope", "row");
                    var z = document.createElement("TD");
                    var z2 = document.createElement("TD");
                    var a = document.createElement("A");
                    a.innerHTML = `<a href="Card/Show/${customer.id}">Öppna</a>`;
                    z2.appendChild(a);
                    z.innerHTML = customer.displayname;
                    y.appendChild(z);
                    y.appendChild(z2)
                    document.getElementById("tblCustomers").appendChild(y);
                });
            }
        });
    }
</script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">


<div class="container py-5">
    <div class="row">
        <div class="col-sm-6">
            <div class="form-group">
                <label for="myAutocomplete">Sök efter mäklare</label>
                <input id="myAutocomplete" type="text" class="form-control">
            </div>
        </div>

        <div class="col-sm-6">
            <div class="btn-group float-right">

                <a class="btn btn-primary" style="margin-right:10px" asp-area="" asp-controller="card" asp-action="NyAgent">Skappa ny kund</a>
                <a class="btn btn-primary" style="margin-right:10px" asp-area="" asp-controller="card" asp-action="Produkter">Produkter</a>
                <a class="btn btn-primary" style="margin-right:10px" asp-area="" asp-controller="card" asp-action="billing">Faktorering</a>
                <a class="btn btn-primary" style="margin-right:10px" asp-area="" asp-controller="card" asp-action="CustomerReport">Kund rapporter</a>
                <a class="btn btn-primary" style="margin-right:10px" asp-area="" asp-controller="card" asp-action="InvoiceReport">Faktor rapporter</a>
            </div>
        </div>
    </div>

    <table class=" table table-striped mt-4" id="tblCustomers">
        <thead>
            <tr>
                <th scope="col">CustomerID</th>
                <th scope="col">Kundkort</th>
            </tr>
        </thead>
        <!-- Fyll på med tabellrader här -->
    </table>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
